{
    "collab_server" : "",
    "contents" : "library(plyr)\n#library(ggplot2)\n#source(\"configuration.R\")\n#source(\"commonFunctions.R\")\n\nP_STAT1 <- TRUE\nP_STAT2 <- FALSE\nNx <- 10; Ny <- 2; dx <- 1; dy <- 1.3\n#directory <- paste(\"./simOut-\",Nx,\"x\",Ny,\"-\",dx,\"mX\",dy,\"m/\",sep=\"\"); setwd(directory);\ndirectory <- \"./\"\noutput.file.name.p1 <- paste(\"distance_vector_stats_all_channels_\",Nx,\"x\",Ny,\"-\",dx,\"mX\",dy,\"m-\",\".csv.txt\",sep=\"\")\noutput.file.name.p2 <- \"distance_vector_stats_per_channel_4thFl-North-Window-90Q.csv.txt\"\n\nexperimentSet <- 1:2\nstartTime <- proc.time()\nprint(length(experimentSet))\nfor(expNo in experimentSet){ \n  TRACE_FILE <- paste(directory,\"2dSim-\",Nx,\"x\",Ny,\"-\",dx,\"mX\",dy,\"m-\",expNo,\".txt\",sep=\"\")\n  cat(TRACE_FILE,\"/\", length(experimentSet), \"\\n\")\n  #packets <- read.table(TRACE_FILE, sep=\"\\t\", na.strings=\"\", col.names=c(\"receiver\", \"sender\", \"channel\", \"rssi\", \"power\", \"time\", \"packetnum\"), colClasses=c(rep(\"factor\",3), \"numeric\", \"factor\", \"character\", \"numeric\"), header=FALSE)\n  packets <- read.table(TRACE_FILE,  na.strings=\"\", header=TRUE)\n  #packets <- subset (packets, sender %in% Truth & receiver %in% Truth);\n  packets <- droplevels(packets)\n  if (P_STAT1) {\n\t  p_stat1<-ddply(packets, .(sender,receiver), summarise,\n\t                packets=length(rssi),\n\t                max_rssi=max(rssi), count_max_rssi=sum(rssi==max(rssi)),\n#\t                min_rssi=min(rssi),\n#\t                median_rssi=median(rssi),\n\t                avg_rssi=mean(rssi),\n# \t                avg_ch11_rssi = mean(subset(rssi,channel==11)),\n# \t                avg_ch18_rssi = mean(subset(rssi,channel==18)),\n#   \t              avg_ch26_rssi = mean(subset(rssi,channel==26)),\n# \t                d_from_mean = d_from_rss(avg_rssi),\n# \t                d_from_ch11 = d_from_rss(avg_ch11_rssi),\n# \t                d_from_ch18 = d_from_rss(avg_ch18_rssi),\n# \t                d_from_ch26 = d_from_rss(avg_ch26_rssi),\n# \t                avg_mw=mean(dbm2mw(rssi)),\n# \t                avg_ch11_mw = mean(dbm2mw(subset(rssi,channel==11))),\n# \t                avg_ch18_mw = mean(dbm2mw(subset(rssi,channel==18))),\n# \t                avg_ch26_mw = mean(dbm2mw(subset(rssi,channel==26))),\n                  avg_rssi_1packet = mean(subset(rssi, packetnum == 1)),\n#                   avg_ch11_rssi_1packet = mean(subset(rssi, packetnum == 1 & channel ==11)),\n#                   avg_ch18_rssi_1packet = mean(subset(rssi, packetnum == 1 & channel ==18)),\n#                   avg_ch26_rssi_1packet = mean(subset(rssi, packetnum == 1 & channel ==26)),\n                  avg_rssi_8packet = mean(subset(rssi, packetnum %in% c(1:8) )),\n#                   avg_ch11_rssi_8packet = mean(subset(rssi, packetnum %in% c(1:8) & channel ==11)),\n#                   avg_ch18_rssi_8packet = mean(subset(rssi, packetnum %in% c(1:8) & channel ==18)),\n#                   avg_ch26_rssi_8packet = mean(subset(rssi, packetnum %in% c(1:8) & channel ==26)),\n                  avg_rssi_16packet = mean(subset(rssi, packetnum %in% c(1:16) )),\n#                   avg_ch11_rssi_16packet = mean(subset(rssi, packetnum %in% c(1:16) & channel ==11)),\n#                   avg_ch18_rssi_16packet = mean(subset(rssi, packetnum %in% c(1:16) & channel ==18)),\n#                   avg_ch26_rssi_16packet = mean(subset(rssi, packetnum %in% c(1:16) & channel ==26)),\n# \t                sd_rssi=sd(rssi),\n# \t                avg_max_2=mean(subset(rssi, rssi>=quantile(rssi, 0.98))),\n# \t                avg_max_5=mean(subset(rssi, rssi>=quantile(rssi, 0.95))),\n# \t                avg_max_10=mean(subset(rssi, rssi>=quantile(rssi, 0.90))),\n                 #AllCh_90Quantile = mean(subset(rssi, rssi>=quantile(rssi, 0.90)))\n                    avg_max_98Q=mean(subset(rssi, rssi>=quantile(rssi, 0.98))),\n                    avg_max_95Q=mean(subset(rssi, rssi>=quantile(rssi, 0.95))),\n                    avg_max_90Q=mean(subset(rssi, rssi>=quantile(rssi, 0.90))),\n                    avg_max_50Q=mean(subset(rssi, rssi>=quantile(rssi, 0.50)))\n\t                )\n\t  p_stat1$run<-expNo\n\t  \n\t  write.table(p_stat1, file=output.file.name.p1, sep=\",\", append=TRUE, col.names=(expNo==1), row.names=FALSE)\n\t  rm(p_stat1)\n  }\n  \t\n if (P_STAT2) {\n\t  p_stat2<-ddply(packets, .(sender,receiver,channel), summarise,\n\t                packets=length(rssi),\n\t                max_rssi=max(rssi), count_max_rssi=sum(rssi==max(rssi)),\n\t                #min_rssi=min(rssi),\n\t                #median_rssi=median(rssi),\n\t                avg_rssi=mean(rssi),\n\t                sd_rssi=sd(rssi),\n\t                avg_max_98Q=mean(subset(rssi, rssi>=quantile(rssi, 0.98))),\n\t                avg_max_95Q=mean(subset(rssi, rssi>=quantile(rssi, 0.95))),\n\t                avg_max_90Q=mean(subset(rssi, rssi>=quantile(rssi, 0.90))),\n\t                avg_max_50Q=mean(subset(rssi, rssi>=quantile(rssi, 0.50)))\n\t                )\n\t  p_stat2$run<-i\n\t  write.table(p_stat2, file=output.file.name.p2, sep=\",\", append=TRUE, col.names=(i==1), row.names=FALSE)\n\t  rm(p_stat2)\n  }\n \n  rm(packets)\n  gc(reset=TRUE)\n  \n}\n\n## Print Elapsed Time\nendTime <- proc.time()\nprint(endTime-startTime)\n  \n",
    "created" : 1418293954278.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1057054396",
    "id" : "1A933DC4",
    "lastKnownWriteTime" : 1418294585,
    "last_content_update" : 0,
    "path" : "~/phd/R/2d/packet_stat.r",
    "project_path" : "packet_stat.r",
    "properties" : {
    },
    "relative_order" : 8,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}